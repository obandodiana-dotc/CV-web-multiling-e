<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diana Obando Marchena ‚Äî 3D Interactive CV</title>
  <meta name="description" content="3D interactive CV card with multilingual support and animated background." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß≠</text></svg>">

  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

  <link rel="stylesheet" href="https://pyscript.net/releases/2024.6.2/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.6.2/core.js"></script>

  <style>
    :root{
      --primary:#06b6d4; /* cyan */
      --accent:#22c55e;  /* green */
      --ink:#0b1220;     /* deep slate */
      --muted:#6b7a90;
      /* MEJORA: Variables para Modo Claro */
      --glass: rgba(255,255,255,0.72);
      --bg-color-1: #ffffff;
      --bg-color-2: #f8fafc;
      --border-color: rgba(2,6,23,.1);
      --shadow-color: rgba(2,6,23,.18);
    }
    /* MEJORA: Definici√≥n de Modo Oscuro */
    .dark-mode{
      --ink:#f8fafc;
      --muted:#94a3b8;
      --glass: rgba(11,18,32,0.88); /* M√°s opaco y profesional */
      --bg-color-1: #0b1220;
      --bg-color-2: #1e293b;
      --border-color: rgba(255,255,255,.1);
      --shadow-color: rgba(0,0,0,.4);
    }
    *{ box-sizing:border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
      /* MEJORA: Uso de variables para el fondo, crucial para Dark Mode */
      background: radial-gradient(1200px 600px at 10% -10%, rgba(6,182,212,.10), transparent),
                  radial-gradient(900px 500px at 100% 0%, rgba(34,197,94,.08), transparent),
                  linear-gradient(180deg, var(--bg-color-1), var(--bg-color-2));
      overflow: hidden;
    }
    /* Three.js canvas backdrop */
    #bg { position: fixed; inset:0; z-index: 0; }
    /* Top bar */
    .topbar{
      position: fixed; z-index: 3; inset: 0 0 auto 0; padding: 12px 16px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      pointer-events: none;
    }
    .lang, .cta{
      pointer-events: auto;
      background: var(--glass);
      /* MEJORA: Glassmorphism m√°s definido */
      backdrop-filter: blur(18px) saturate(180%);
      border:1px solid var(--border-color);
      border-radius: 12px;
      padding: 8px 12px;
      display:flex; gap:8px; align-items:center;
      box-shadow: 0 8px 24px var(--shadow-color);
    }
    select{
      border:none; background:transparent; font-weight:700; color:var(--ink);
      outline:none;
    }
    .cta a{
      text-decoration:none; color:var(--ink); font-weight:700;
    }
    .cta a:hover{ color:var(--primary); }
    /* 3D card container */
    .stage{
      position: relative;
      width: 100%; height: 100%;
      display: grid; place-items: center;
      z-index: 2;
      perspective: 1200px;
    }
    .card3d{
      position: relative;
      /* MEJORA: Aumento del tama√±o para mejor UX en m√≥viles */
      width: min(860px, 94vw);
      height: min(600px, 85vh);
      transform-style: preserve-3d;
      transform: rotateX(6deg) rotateY(-8deg);
      transition: transform .2s ease-out;
    }
    .panel{
      position:absolute; inset:0;
      background: var(--glass);
      /* MEJORA: Glassmorphism m√°s definido */
      backdrop-filter: blur(18px) saturate(180%);
      border: 1px solid var(--border-color);
      border-radius: 24px;
      padding: 24px; /* Ligeramente m√°s padding */
      box-shadow: 0 14px 48px var(--shadow-color);
      display: grid; grid-template-columns: 1.3fr 1fr; gap: 24px; /* Mayor separaci√≥n */
      transform: translateZ(40px);
    }
    .left{ display:flex; flex-direction:column; gap:12px; }
    .right{ display:flex; flex-direction:column; gap:12px; }
    .title{ font-size: 1.6rem; font-weight:900; letter-spacing:.2px }
    .subtitle{ font-size:1.05rem; font-weight:800; color:var(--primary) }
    .muted{ color: var(--muted); }
    ul{ margin:.5rem 0; padding-left: 1.2rem; }
    .chip, .tag{
      display:inline-block; padding:6px 10px; margin:4px 6px 0 0; border-radius:999px;
      background: rgba(6,182,212,.10); border:1px solid rgba(6,182,212,.25);
      color: var(--ink); font-weight:700; font-size:.85rem;
    }
    .btns{ display:flex; gap:10px; flex-wrap:wrap; margin-top:6px; }
    .btn{
      display:inline-flex; gap:8px; align-items:center; text-decoration:none;
      padding:10px 12px; border-radius:12px; border:1px solid var(--border-color);
      background:white; color:var(--ink); font-weight:700;
      box-shadow: 0 4px 14px rgba(2,6,23,.08);
    }
    .btn:hover{ color: var(--primary); }
    .kpis{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top:6px; }
    .kpi{ 
      padding:14px; border-radius:16px; border:1px solid var(--border-color); 
      background: var(--bg-color-1); text-align:center; 
      box-shadow: 0 2px 8px rgba(2,6,23,.05); 
    }
    .kpi .v{ font-size:1.8rem; font-weight:900; line-height: 1.1; } 
    .kpi .l{ color:var(--muted); margin-top:-2px; font-size: 0.9rem; } 
    .qr{
      display:flex; align-items:center; justify-content:center;
      background: var(--bg-color-1); border-radius:16px; border:1px solid var(--border-color);
      height: 120px;
    }
    /* Small footer */
    .footer{
      position: fixed; z-index: 3; inset: auto 0 6px 0; text-align:center; color:var(--muted); font-size:.9rem;
      background: linear-gradient(180deg, transparent, var(--bg-color-1)); 
      padding: 6px;
    }
    @media (max-width: 860px){
      .panel{ grid-template-columns: 1fr; height: 100%; overflow:auto; padding: 20px; gap: 20px; } 
    }
  </style>
</head>
<body>
  <canvas id="bg"></canvas>

  <div class="topbar">
    <div class="lang">
      <span>üåç</span>
      <select id="lang">
        <option value="de">Deutsch</option>
        <option value="en">English</option>
        <option value="es" selected>Espa√±ol</option>
        <option value="fr">Fran√ßais</option>
        <option value="it">Italiano</option>
      </select>
      <button id="darkModeToggle" style="border:none; background:transparent; font-size:1.1rem; cursor:pointer;" title="Toggle Dark Mode">üåì</button>
    </div>
    <div class="cta">
      <a id="downloadCv" href="./cv_diana_de.pdf" download>‚¨áÔ∏è CV (PDF)</a> 
      <a id="openLinkedin" href="https://www.linkedin.com/in/diana-obando-marchena" target="_blank">üîó LinkedIn</a>
      <a id="openGithub" href="https://github.com/obandodiana-dotc" target="_blank">üìÇ GitHub</a>
      <a id="emailBtn" href="mailto:obando.diana@web.de?subject=Kontakt%20via%203D%20CV">‚úâÔ∏è Email</a>
    </div>
  </div>

  <div class="stage" id="stage">
    <div class="card3d" id="card">
      <div class="panel">
        <div class="left">
          <div class="title" id="name">Diana Obando Marchena</div>
          <div class="subtitle" id="headline">Spezialistin f√ºr Zoll, Au√üenwirtschaft & Compliance</div>
          <div class="muted" id="summary">Ergebnisorientierte Spezialistin im Zoll- und Au√üenwirtschaftsrecht...</div>

          <div class="kpis">
            <div class="kpi"><div class="v" id="kpi1v">192</div><div class="l" id="kpi1l">Importvorg√§nge</div></div>
            <div class="kpi"><div class="v" id="kpi2v">25%</div><div class="l" id="kpi2l">Prozesszeit ‚Üì</div></div>
            <div class="kpi"><div class="v" id="kpi3v">99.5%</div><div class="l" id="kpi3l">SLA/Compliance</div></div>
          </div>

          <div class="btns">
            <a class="btn" href="https://www.linkedin.com/in/diana-obando-marchena" target="_blank">üîó LinkedIn</a>
            <a class="btn" href="https://github.com/obandodiana-dotc" target="_blank">üìÇ GitHub</a>
            <a class="btn" href="mailto:obando.diana@web.de?subject=Kontakt%20via%203D%20CV">‚úâÔ∏è Contact</a>
          </div>
        </div>

        <div class="right">
          <div>
            <div class="subtitle" id="skillsTitle">Skills</div>
            <div id="skillsTags"></div>
          </div>

          <div>
            <div class="subtitle" id="expTitle">Experience</div>
            <ul id="expList"></ul>
          </div>

          <div class="qr" id="qrBox">
            <span id="qrText">üìç M√ºnchen ¬∑ Chancenkarte | Scanne para contacto</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">¬© <span id="year"></span> Diana Obando Marchena ¬∑ 3D Interactive CV</div>

  <py-script>
from pyscript import display, js

cv = {
  "name": "Diana Obando Marchena",
  "contacts": {
    "city": "M√ºnchen, Deutschland",
    "email": "obando.diana@web.de",
    "phone": "+49 160 767 7666"
  },
  # MEJORA: Nueva estructura para traducir t√≠tulos de secciones y botones
  "i18n": { 
      "de": {"skillsTitle": "F√§higkeiten", "expTitle": "Erfahrung", "downloadCv": "‚¨áÔ∏è CV (PDF)", "qrText": "üìç M√ºnchen ¬∑ Chancenkarte | Scannen Sie f√ºr Kontakt"},
      "en": {"skillsTitle": "Skills", "expTitle": "Experience", "downloadCv": "‚¨áÔ∏è CV (PDF)", "qrText": "üìç Munich ¬∑ Chancenkarte | Scan for contact"},
      "es": {"skillsTitle": "Habilidades", "expTitle": "Experiencia", "downloadCv": "‚¨áÔ∏è CV (PDF)", "qrText": "üìç M√∫nich ¬∑ Chancenkarte | Escanea para contacto"},
      "fr": {"skillsTitle": "Comp√©tences", "expTitle": "Exp√©rience", "downloadCv": "‚¨áÔ∏è CV (PDF)", "qrText": "üìç Munich ¬∑ Chancenkarte | Scanner pour contact"},
      "it": {"skillsTitle": "Competenze", "expTitle": "Esperienza", "downloadCv": "‚¨áÔ∏è CV (PDF)", "qrText": "üìç Monaco ¬∑ Chancenkarte | Scansiona per contatto"}
  },
  "roles": {
    "de": {
      "headline": "Spezialistin f√ºr Zoll, Au√üenwirtschaft & Compliance",
      "summary": "Ergebnisorientierte Spezialistin im Zoll- und Au√üenwirtschaftsrecht mit Erfolgen in Prozessoptimierung, Risikomanagement und rechtssicheren Abl√§ufen (SAP, Oracle).",
      "kpis": [ ["192","Importvorg√§nge (DHL Praktikum)"], ["25%","Prozesszeit ‚Üì (Bank)"], ["99.5%","SLA/Compliance"] ],
      "skills": ["Zollabwicklung (Import/Export)","DUA","Zoll-Compliance","Risikomanagement","Audit","SAP","Oracle","WMS","SharePoint","Excel (Adv)"],
      "exp": [
        "Banco Popular ‚Äî Gesch√§ftsbetrieb: Workflows, Compliance, Reporting (2021‚Äì2025)",
        "Expeditors ‚Äî Key Account Ops: KPIs, Zollvorschriften, OTD (2021)",
        "DHL ‚Äî Lager & Best√§nde: Audits, WMS, Qualit√§t (2020‚Äì2021)"
      ]
    },
    "en": {
      "headline": "Customs, Foreign Trade & Compliance Specialist",
      "summary": "Results-driven specialist with a proven record in process optimization, risk management, and compliant workflows using ERP systems (SAP, Oracle).",
      "kpis": [ ["192","Import operations"], ["25%","Cycle time ‚Üì"], ["99.5%","SLA/Compliance"] ],
      "skills": ["Customs (import/export)","DUA","Trade compliance","Risk mgmt","Audit","SAP","Oracle","WMS","SharePoint","Excel (Adv)"],
      "exp": [
        "Banco Popular ‚Äî Business Operations: streamlined workflows and compliance, achieving 25% cycle time reduction (2021‚Äì2025)", 
        "Expeditors ‚Äî Key Account Ops: KPIs, regulations, OTD (2021)",
        "DHL ‚Äî Warehouse & Inventory: audits, WMS, quality (2020‚Äì2021)"
      ]
    },
    "es": {
      "headline": "Especialista en Aduanas, Comercio Exterior y Compliance",
      "summary": "Especialista orientada a resultados con logros en optimizaci√≥n de procesos, gesti√≥n de riesgos y flujos conformes con ERP (SAP, Oracle).",
      "kpis": [ ["192","Operaciones de importaci√≥n"], ["25%","Tiempo de proceso ‚Üì"], ["99.5%","SLA/Compliance"] ],
      "skills": ["Aduanas (import/export)","DUA","Compliance de comercio exterior","Gesti√≥n de riesgos","Auditor√≠a","SAP","Oracle","WMS","SharePoint","Excel (Avanzado)"],
      "exp": [
        "Banco Popular ‚Äî Operaciones: optimizaci√≥n de flujos y compliance, logrando una reducci√≥n del 25% en el tiempo de ciclo (2021‚Äì2025)", 
        "Expeditors ‚Äî Key Account Ops: KPIs, normativa, OTD (2021)",
        "DHL ‚Äî Almac√©n e inventario: auditor√≠as, WMS, calidad (2020‚Äì2021)"
      ]
    },
    "fr": {
      "headline": "Sp√©cialiste Douanes, Commerce Ext√©rieur & Conformit√©",
      "summary": "Sp√©cialiste ax√©e sur les r√©sultats, experte en optimisation des processus, gestion des risques et conformit√© (SAP, Oracle).",
      "kpis": [ ["192","Op√©rations d'import"], ["25%","Temps de cycle ‚Üì"], ["99.5%","SLA/Conformit√©"] ],
      "skills": ["Douanes (import/export)","DUA","Conformit√©","Gestion des risques","Audit","SAP","Oracle","WMS","SharePoint","Excel (Avanc√©)"],
      "exp": [
        "Banco Popular ‚Äî Op√©rations: optimisation des flux et conformit√©, entra√Ænant une r√©duction de 25% du temps de cycle (2021‚Äì2025)",
        "Expeditors ‚Äî Comptes cl√©s: KPIs, r√©glementation, OTD (2021)",
        "DHL ‚Äî Entrep√¥t & inventaire: audits, WMS, qualit√© (2020‚Äì2021)"
      ]
    },
    "it": {
      "headline": "Specialista in Dogane, Commercio Estero e Compliance",
      "summary": "Specialista orientata ai risultati con esperienza in ottimizzazione dei processi, gestione dei rischi e flussi conformi (SAP, Oracle).",
      "kpis": [ ["192","Operazioni d'importazione"], ["25%","Tempo di processo ‚Üì"], ["99.5%","SLA/Compliance"] ],
      "skills": ["Dogane (import/export)","DUA","Trade compliance","Gestione rischi","Audit","SAP","Oracle","WMS","SharePoint","Excel (Avanzato)"],
      "exp": [
        "Banco Popular ‚Äî Operations: ottimizzazione dei flussi e compliance, con una riduzione del 25% del tempo di ciclo (2021‚Äì2025)",
        "Expeditors ‚Äî Key Account Ops: KPI, normative, OTD (2021)",
        "DHL ‚Äî Magazzino & inventario: audit, WMS, qualit√† (2020‚Äì2021)"
      ]
    }
  }
}

# Expose to JS
js.window.CV_DATA = cv
  </py-script>

  <script>
    // Basic language switch using CV_DATA from PyScript
    const $ = (sel) => document.querySelector(sel);
    const skillsTags = $("#skillsTags");
    const expList = $("#expList");
    const langSelect = $("#lang");
    const nameEl = $("#name"), headlineEl=$("#headline"), summaryEl=$("#summary");
    const yearEl = $("#year");
    
    // Elementos para la traducci√≥n de UI y Dark Mode
    const skillsTitleEl = $("#skillsTitle");
    const expTitleEl = $("#expTitle");
    const downloadCvBtn = $("#downloadCv");
    const qrTextEl = $("#qrText");
    const darkModeToggle = $("#darkModeToggle");

    yearEl.textContent = new Date().getFullYear();

    function render(lang="es"){
      // Si por alguna raz√≥n CV_DATA no est√° definido al llamar a render, salimos.
      if (typeof CV_DATA === 'undefined') return;

      const role = CV_DATA.roles[lang] || CV_DATA.roles["en"];
      const i18n = CV_DATA.i18n[lang] || CV_DATA.i18n["en"];
      
      nameEl.textContent = CV_DATA.name;
      headlineEl.textContent = role.headline;
      summaryEl.textContent = role.summary;

      // Traducci√≥n de KPIs
      $("#kpi1v").textContent = role.kpis[0][0];
      $("#kpi1l").textContent = role.kpis[0][1];
      $("#kpi2v").textContent = role.kpis[1][0];
      $("#kpi2l").textContent = role.kpis[1][1];
      $("#kpi3v").textContent = role.kpis[2][0];
      $("#kpi3l").textContent = role.kpis[2][1];

      // Traducci√≥n de t√≠tulos de secciones y botones
      skillsTitleEl.textContent = i18n.skillsTitle;
      expTitleEl.textContent = i18n.expTitle;
      downloadCvBtn.innerHTML = i18n.downloadCv;
      qrTextEl.textContent = i18n.qrText;
      
      // Skills
      skillsTags.innerHTML = "";
      role.skills.forEach(s => {
        const span = document.createElement("span");
        span.className = "tag";
        span.textContent = s;
        skillsTags.appendChild(span);
      });

      // Experience
      expList.innerHTML = "";
      role.exp.forEach(e => {
        const li = document.createElement("li");
        li.textContent = e;
        expList.appendChild(li);
      });
    }

    // ====================================================================
    // üö© CORRECCI√ìN CR√çTICA: La l√≥gica principal debe esperar a PyScript
    // ====================================================================
    function setup() {
        // Validaci√≥n de seguridad por si PyScript no ha cargado.
        if (typeof CV_DATA === 'undefined') {
            // Reintentamos en 100ms si los datos no est√°n listos.
            setTimeout(setup, 100);
            return;
        }

        // 1. Interactive 3D tilt
        const card = $("#card");
        const stage = $("#stage");
        stage.addEventListener("mousemove", (e) => {
          const r = stage.getBoundingClientRect();
          const px = (e.clientX - r.left) / r.width - 0.5;
          const py = (e.clientY - r.top) / r.height - 0.5;
          const rx = py * -10;
          const ry = px * 16;
          card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
        stage.addEventListener("mouseleave", () => {
          card.style.transform = `rotateX(6deg) rotateY(-8deg)`;
        });

        // 2. Language change
        langSelect.addEventListener("change", (e) => {
          render(e.target.value);
        });
        
        // 3. Renderizado inicial (ahora garantizado que CV_DATA existe)
        render(langSelect.value);

        // 4. Dark Mode logic
        darkModeToggle.addEventListener("click", () => {
          document.body.classList.toggle("dark-mode");
          const isDarkMode = document.body.classList.contains("dark-mode");
          darkModeToggle.textContent = isDarkMode ? "‚òÄÔ∏è" : "üåì";
        });
    }

    // Iniciar la configuraci√≥n con un peque√±o retraso (50ms) para asegurar que PyScript haya definido CV_DATA.
    setTimeout(setup, 50);

    // ====================================================================
    // L√≥gica de Three.js (No depende de CV_DATA, puede permanecer fuera de setup)
    // ====================================================================
    const canvas = document.getElementById("bg");
    const renderer = new THREE.WebGLRenderer({canvas, antialias:true});
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
    camera.position.z = 50;

    const resize = () => {
      renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
      renderer.setSize(innerWidth, innerHeight);
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
    };
    window.addEventListener("resize", resize);
    resize();

    // Particles
    const geom = new THREE.BufferGeometry();
    const count = 1200;
    const positions = new Float32Array(count * 3);
    for (let i=0;i<count;i++){
      positions[i*3+0] = (Math.random()-0.5)*200;
      positions[i*3+1] = (Math.random()-0.5)*120;
      positions[i*3+2] = (Math.random()-0.5)*160;
    }
    geom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    const mat = new THREE.PointsMaterial({ color: 0x06b6d4, size: 1.2, transparent: true, opacity: 0.75 });
    const pts = new THREE.Points(geom, mat);
    scene.add(pts);

    const clock = new THREE.Clock();
    function animate(){
      const t = clock.getElapsedTime();
      pts.rotation.y = t * 0.06;
      pts.rotation.x = Math.sin(t*0.2)*0.08;
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
